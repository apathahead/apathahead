!function(){"use strict";var t;!function(t){t[t.t=0]="Up",t[t.h=1]="Down",t[t.i=2]="Left",t[t.o=3]="Right"}(t||(t={}));var s,h=t;class i{constructor(t){this.value=t}l(){return new e(Math.cos(this.value),Math.sin(this.value))}static random(){return new i(Math.random()*Math.PI*2)}}class e{constructor(t,s){this.x=t,this.y=s}add(t){return new e(this.x+t.x,this.y+t.y)}angle(t){return new i(Math.atan2(this.y-t.y,this.x-t.x)+Math.PI)}u(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}M(t){return new e(this.x*t,this.y*t)}}class r{constructor(t,s){this.v=t,this.name=s}}class a extends r{constructor(t){super(t,"Presence"),this.p=new e(Math.random(),Math.random());do{this.m=new e(Math.random(),Math.random())}while(this.m.u(this.p)<.5)}k(t){this.v.A(Math.floor(100*this.ratio()).toString().padStart(3," ")+"%",R.D,.5,.5)}ended(){return 1==this.ratio()}g(t){switch(t){case h.i:this.p.x=Math.max(0,this.p.x-a.I);break;case h.o:this.p.x=Math.min(1,this.p.x+a.I);break;case h.t:this.p.y=Math.max(0,this.p.y-a.I);break;case h.h:this.p.y=Math.min(1,this.p.y+a.I)}}ratio(){return Math.min(1,Math.max(0,(1-this.m.u(this.p)/Math.sqrt(2))*a.S))}}a.I=.1,a.S=1.2;class n extends r{constructor(t){super(t,"Otherness"),this.L=i.random().l(),this.p=new e(Math.random(),Math.random());do{this.m=new e(Math.random(),Math.random())}while(this.m.u(this.p)<.5)}k(t){if(this.m=this.m.add(this.L.M(n.C)),this.m.x<0||this.m.x>1||this.m.y<0||this.m.y>1){this.m.x=Math.min(Math.max(this.m.x,0),1),this.m.y=Math.min(Math.max(this.m.y,0),1);var s=i.random();Math.abs(s.value-this.m.angle(this.p).value)<.4&&(s.value+=Math.PI),this.L=s.l()}this.v.A(Math.floor(100*this.ratio()).toString().padStart(3," ")+"%",R.D,.5,.5)}ended(){return 1==this.ratio()}g(t){switch(t){case h.i:this.p.x=Math.max(0,this.p.x-n.I);break;case h.o:this.p.x=Math.min(1,this.p.x+n.I);break;case h.t:this.p.y=Math.max(0,this.p.y-n.I);break;case h.h:this.p.y=Math.min(1,this.p.y+n.I)}}ratio(){return Math.min(1,Math.max(0,(1-this.m.u(this.p)/Math.sqrt(2))*n.S))}}n.I=.1,n.C=.002,n.S=1.2;class o extends r{constructor(t){super(t,"Struggle"),this.T=100,this._=null,this.p=new e(0,5),this.R()}k(t){if(null!==this._&&Date.now()<this._+o.q){var s=255-(this._+o.q-Date.now())/o.q*35;this.v.H(0,0,1,1,"rgb("+s.toString()+", "+s.toString()+", "+s.toString()+")")}this.v.A(Math.floor(this.T).toString().padStart(3," "),o.K,.5,.1,"center","bottom"),this.v.A((10*this.p.x).toString().padStart(3," ")+"%",R.D,.5,.5)}ended(){return 10===this.p.x}g(t){const s=new e(this.p.x,this.p.y);switch(t){case h.i:this.p.x=Math.max(0,this.p.x-1);break;case h.o:this.p.x=Math.min(10,this.p.x+1);break;case h.t:this.p.y=Math.max(0,this.p.y-1);break;case h.h:this.p.y=Math.min(10,this.p.y+1)}s.x===this.p.x&&s.y===this.p.y||this.F()}F(){for(var t=0;t<11;t++)for(var s=0;s<11;s++)if(1==this.grid[t][s]){const h=this.p.u(new e(t,s));h<3&&(this.T=Math.max(0,this.T-(Math.exp(6-2*h)-1)*o.j))}!0===this.grid[this.p.x][this.p.y]&&(this.T=Math.max(0,this.T-25),0!==this.p.y&&10!==this.p.y||(this.T=Math.max(0,this.T-12))),0===Math.floor(this.T)&&(this.T=100,this.p=new e(0,5),this._=Date.now())}R(){this.grid=new Array;for(var t=0;t<11;t++){this.grid.push(new Array);for(var s=0;s<11;s++)this.grid[t].push(!1)}var h=[0,1,2,3,4,5,6,7,8,9,10];for(var t of(function(t){for(var s=t.length-1;s>0;s--){var h=Math.floor(Math.random()*(s+1)),i=t[s];t[s]=t[h],t[h]=i}}(h),s=0,[this.v.G(2,3),this.v.G(4,5),this.v.G(5,6),this.v.G(7,8),this.v.G(8,9),this.v.G(2,3),this.v.G(4,5),this.v.G(5,6),this.v.G(7,8),this.v.G(8,9)]))this.grid[t][h[s]]=!0,s+=1;this.grid[this.v.G(2,9)][h[s]]=!0}}o.j=.1,o.q=500,o.K=.08;class c extends r{constructor(t){super(t,"Strength"),this.O=!1,this.P="",this.T=50,this.U=0,this.p=new e(3,4),this._=null,this.B=!1,this.V=new Array,this.grid=new Array;for(var h=0;h<7;h++){this.V.push(new Array),this.grid.push(new Array);for(var i=0;i<5;i++)this.V[h].push(null),this.grid[h].push(null)}const r=[s.W,s.W,s.W,s.J,s.J,s.N,s.N,s.N,s.X,s.Y,s.Z,s.$,s.tt,s.Z,s.$,s.tt,s.st,s.ht];!function(t){for(var s=t.length-1;s>0;s--){var h=Math.floor(Math.random()*(s+1)),i=t[s];t[s]=t[h],t[h]=i}}(r);for(var a=0,n=0;n<=4;n+=4)for(h=0;h<3;h++)for(i=0;i<=4;i+=2)this.V[h+n][i]=r[a],this.grid[h+n][i]=r[a],a+=1}k(t){if(null!==this._&&Date.now()<this._+c.q){var s=255-(this._+c.q-Date.now())/c.q*35;this.v.H(0,0,1,1,"rgb("+s.toString()+", "+s.toString()+", "+s.toString()+")")}this.v.A(this.T.toString(),c.it,.5,.1,"center","bottom"),this.v.A(this.P,c.it,.5,.105,"center","top"),this.v.A(this.U.toString().padStart(3," ")+"%",R.D,.5,.5)}ended(){return 100===this.U}g(t){const s=new e(this.p.x,this.p.y);switch(t){case h.i:this.p.x=Math.max(0,this.p.x-1);break;case h.o:this.p.x=Math.min(6,this.p.x+1);break;case h.t:3===this.p.x&&0===this.p.y?(!0===this.B?this.U=Math.min(100,this.U+10):this.U=Math.min(100,this.U+5),!0===this.O?this.T=Math.max(0,this.T-10):this.T=Math.max(0,this.T-20)):this.p.y=Math.max(0,this.p.y-1);break;case h.h:this.p.y=Math.min(4,this.p.y+1)}if(s.x===this.p.x&&s.y===this.p.y||this.F(),0===this.T){this.T=50,this.U=0,this.p=new e(3,4);for(var i=0;i<7;i++)for(var r=0;r<5;r++)this.grid[i][r]=this.V[i][r];this.O=!1,this.B=!1,this.P="",this._=Date.now()}}F(){if(null!==this.grid[this.p.x][this.p.y]){switch(this.grid[this.p.x][this.p.y]){case s.W:this.T=0;break;case s.J:this.T*=2;break;case s.N:this.T+=5;break;case s.X:this.T+=10;break;case s.Y:this.T+=15;break;case s.Z:this.T=Math.max(0,this.T-10);break;case s.$:this.T=Math.max(0,this.T-20);break;case s.tt:this.T=Math.max(0,this.T-40);break;case s.st:this.O=!0,this.P+="A";break;case s.ht:this.B=!0,this.P+="S"}this.grid[this.p.x][this.p.y]=null}}}c.q=500,c.it=.08,function(t){t[t.W=0]="A99",t[t.J=1]="A10",t[t.N=2]="A11",t[t.X=3]="A12",t[t.Y=4]="A13",t[t.Z=5]="A14",t[t.$=6]="A15",t[t.tt=7]="A16",t[t.st=8]="A17",t[t.ht=9]="A18"}(s||(s={}));class w extends r{constructor(t){super(t,"Cooperation"),this._=null,this.et()}k(t){if(null!==this._&&Date.now()<this._+w.q){var s=255-(this._+w.q-Date.now())/w.q*35;this.v.H(0,0,1,1,"rgb("+s.toString()+", "+s.toString()+", "+s.toString()+")")}this.v.A(this.T.toString(),w.rt,.5,.1,"center","bottom"),this.v.A(this.nt(),w.rt,.5,.105,"center","top"),this.v.A(this.U.toString().padStart(3," ")+"%",R.D,.5,.5),null!==this.ot&&""!==this.ot.ct()&&this.v.A(this.ot.ct(),w.rt,.5,.915,"center","top")}ended(){return 100===this.U}g(t){const s=new e(this.p.x,this.p.y);switch(t){case h.i:s.x=Math.max(0,s.x-1);break;case h.o:s.x=Math.min(6,s.x+1);break;case h.t:s.y=Math.max(0,s.y-1);break;case h.h:s.y=Math.min(2,s.y+1)}s.x===this.p.x&&s.y===this.p.y?this.ot=null:this.ot===this.grid[s.x][s.y]?(this.grid[s.x][s.y].wt(),this.ot=null):(this.grid[s.x][s.y].lt(),this.ot=this.grid[s.x][s.y]),0===this.T&&this.et()}nt(){var t="";if(0!=this.ut&&(t+=this.ut.toString()),0!==this.items.length)for(var s=0;s<this.items.length;s++)t+=this.items[s];return t}et(){this.T=100,this.items=new Array,this.ot=null,this.ut=30,this.U=0,this.p=new e(6,1),this.grid=new Array;for(var t=0;t<7;t++){this.grid.push(new Array);for(var s=0;s<3;s++)this.grid[t].push(new f(this,new e(t,s)))}this.grid[6][0]=new p(this,new e(6,0)),this.grid[6][2]=new p(this,new e(6,2)),this.grid[0][1]=new d(this,new e(0,1));var h=new Array;for(t=1;t<6;t++)for(s=0;s<=2;s+=2)h.push(new e(t,s));!function(t){for(var s=t.length-1;s>0;s--){var h=Math.floor(Math.random()*(s+1)),i=t[s];t[s]=t[h],t[h]=i}}(h);var i=[new v(this,h[0],"A",30,1),new v(this,h[1],"S",30,1),new v(this,h[2],"E",this.v.ft([6,8,10]),this.v.ft([3,4,5,6])),new v(this,h[3],"D",this.v.ft([30,35,40,45]),this.v.ft([2,3])),new v(this,h[4],"D",this.v.ft([30,35,40,45]),this.v.ft([2,3])),new u(this,h[5],"E",this.v.ft([15,20,25])),new u(this,h[6],"D",this.v.ft([80,85,90,95,100])),new M(this,h[7],20,this.v.ft([25,30])),this.v.ft([new u(this,h[8],"A",this.v.ft([20,40,80,120])),new u(this,h[8],"S",this.v.ft([20,40,80,120])),new u(this,h[8],"E",this.v.ft([10,15,20,25,30])),new u(this,h[8],"D",this.v.ft([60,70,80,90,100,110,120]))]),this.v.ft([new v(this,h[9],"E",this.v.ft([10,12,14,16]),this.v.ft([2,3,4,5,6,7])),new v(this,h[9],"D",this.v.ft([45,50,55,60]),this.v.ft([1,2,3,4])),new v(this,h[9],"A",this.v.ft([25,45,60]),1),new v(this,h[9],"S",this.v.ft([25,45,60]),1),new M(this,h[9],5,this.v.ft([5,6,7,8,9,10])),new M(this,h[9],200,200)])];for(var r of i)this.grid[r.position.x][r.position.y]=r}}w.q=500,w.rt=.08;class l{constructor(t,s){this.Mt=t,this.position=s}ct(){return""}wt(){this.lt()}lt(){}}class u extends l{constructor(t,s,h,i){super(t,s),this.item=h,this.dt=i}ct(){return this.item+"/"+this.dt.toString()}wt(){this.Mt.items.includes(this.item)&&(this.Mt.ut+=this.dt,this.Mt.items.splice(this.Mt.items.indexOf(this.item),1))}}class f extends l{lt(){this.Mt.p.x=this.position.x,this.Mt.p.y=this.position.y}}class M extends l{constructor(t,s,h,i){super(t,s),this.T=h,this.dt=i}ct(){return this.dt.toString()+"/"+this.T}wt(){this.Mt.ut>=this.dt&&(this.Mt.ut-=this.dt,this.Mt.T+=this.T)}}class d extends l{lt(){this.Mt.items.includes("A")?this.Mt.T=Math.max(0,this.Mt.T-10):this.Mt.T=Math.max(0,this.Mt.T-20),this.Mt.items.includes("S")?this.Mt.U=Math.min(100,this.Mt.U+6):this.Mt.U=Math.min(100,this.Mt.U+3)}}class v extends l{constructor(t,s,h,i,e){super(t,s),this.item=h,this.dt=i,this.vt=e}ct(){return this.vt>=1?this.dt.toString()+"/"+this.item:"..."}wt(){this.vt>=1&&this.Mt.ut>=this.dt&&(this.Mt.ut-=this.dt,this.Mt.items.push(this.item),this.vt-=1)}}class p extends l{}class b extends r{constructor(t){super(t,"Travel"),this.U=0,this.startTime=Date.now()}k(t){this.U=Math.min(100,(Date.now()-this.startTime)*b.bt),this.v.A(Math.floor(this.U).toString().padStart(3," ")+"%",R.D,.5,.5)}ended(){return 100===this.U}g(t){}}b.bt=.0055;class m extends r{constructor(t){super(t,"Hello World");var s=this.v.G(0,25);this.grid=new Array;for(var h=0;h<8;h++){this.grid.push(new Array);for(var i=0;i<8;i++)this.grid[h].push(m.kt.substring(s+h,s+h+8-i))}this.xt=new e(this.v.G(0,7),this.v.G(0,7));do{this.p=new e(this.v.G(0,7),this.v.G(0,7))}while(this.p.u(this.xt)<=3)}k(t){this.v.A(this.grid[this.xt.x][this.xt.y],R.D,.5,.25),this.v.A(this.grid[this.p.x][this.p.y],R.D,.5,.75)}ended(){return this.p.x===this.xt.x&&this.p.y===this.xt.y}g(t){switch(t){case h.i:this.p.x=Math.max(0,this.p.x-1);break;case h.o:this.p.x=Math.min(7,this.p.x+1);break;case h.t:this.p.y=Math.max(0,this.p.y-1);break;case h.h:this.p.y=Math.min(7,this.p.y+1)}}}m.kt="abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz";class k extends r{constructor(t){super(t,"Limits"),this.At=null,this.state=new Array;for(var s=0;s<this.v.G(2,4);s++)this.state.push(this.v.G(1,9).toString());this.state.push("y");for(s=0;s<this.v.G(4,5);s++)this.state.push(this.v.G(1,9).toString());this.state.push("t");for(s=0;s<this.v.G(2,4);s++)this.state.push(this.v.G(1,9).toString());this.yt=["y","t"]}k(t){for(var s="",h=0;h<this.yt.length;h++)s+=this.yt[h];this.v.A(s,R.D,.5,.25);var i="";for(h=0;h<this.state.length;h++)i+=this.state[h];this.v.A(i,R.D,.5,.75),null!==this.At&&this.v.Dt(.5,.5,k.gt)}ended(){if(this.state.length!==this.yt.length)return!1;for(var t=0;t<this.state.length;t++)if(this.state[t]!==this.yt[t])return!1;return!0}g(t){if(null===this.At)this.At=t;else{if(this.At===h.t&&t===h.t)for(var s=0;s<this.state.length;s++)"y"!==this.state[s]&&"t"!==this.state[s]&&(this.state[s]=Math.min(9,parseInt(this.state[s])+1).toString());else if(this.At===h.t&&t===h.h)for(s=0;s<this.state.length;s++)"y"!==this.state[s]&&"t"!==this.state[s]&&("1"===this.state[s]?this.state[s]="0":this.state[s]=Math.min(9,parseInt(this.state[s])+1).toString());else if(this.At===h.t&&t===h.i)for(s=0;s<this.state.length;s++)"7"===this.state[s]?this.state[s]="2":"2"===this.state[s]&&(this.state[s]="7");else if(this.At===h.t&&t===h.o)for(s=0;s<this.state.length;s++)"6"===this.state[s]?this.state[s]="3":"3"===this.state[s]&&(this.state[s]="6");else if(this.At===h.h&&t===h.h)for(s=0;s<this.state.length;s++)"y"!==this.state[s]&&"t"!==this.state[s]&&parseInt(this.state[s])%3==0&&(this.state[s]=Math.max(0,parseInt(this.state[s])-1).toString());else if(this.At===h.h&&t===h.i)for(s=0;s<this.state.length;s++)"y"!==this.state[s]&&"t"!==this.state[s]&&parseInt(this.state[s])%4==0&&(this.state[s]=Math.max(0,parseInt(this.state[s])-1).toString());else if(this.At===h.h&&t===h.o)for(s=0;s<this.state.length;s++)"y"!==this.state[s]&&"t"!==this.state[s]&&parseInt(this.state[s])%5==0&&(this.state[s]=Math.max(0,parseInt(this.state[s])-1).toString());else if(this.At===h.h&&t===h.t)for(s=0;s<this.state.length;s++)"y"!==this.state[s]&&"t"!==this.state[s]&&(Math.random()<.5?this.state[s]=Math.min(9,parseInt(this.state[s])+1).toString():parseInt(this.state[s])>2&&(this.state[s]=Math.max(0,parseInt(this.state[s])-1).toString()));else if(this.At===h.i&&t===h.h)for(s=0;s<this.state.length;s++)"2"===this.state[s]?this.state[s]="1":"7"===this.state[s]&&(this.state[s]="8");else if(this.At===h.i&&t===h.i)for(s=0;s<this.state.length;s++)"4"===this.state[s]&&(this.state[s]="5");else if(this.At===h.i&&t===h.t)for(s=0;s<this.state.length;s++)"5"===this.state[s]&&(this.state[s]="6");else if(this.At===h.i&&t===h.o)for(s=0;s<this.state.length;s++)"6"===this.state[s]&&(this.state[s]="7");else if(this.At===h.o&&t===h.h)for(s=0;s<this.state.length;s++)"7"===this.state[s]?this.state[s]="6":"2"===this.state[s]&&(this.state[s]="3");else if(this.At===h.o&&t===h.o)for(s=0;s<this.state.length;s++)"7"===this.state[s]&&(this.state[s]="8");else if(this.At===h.o&&t===h.t)for(s=0;s<this.state.length;s++)"8"===this.state[s]&&(this.state[s]="9");else if(this.At===h.o&&t===h.i)for(s=0;s<this.state.length;s++)"3"===this.state[s]&&(this.state[s]="4");this.At=null}for(;this.state.includes("0");)this.state.splice(this.state.indexOf("0"),1)}}k.gt=.01;class x extends r{constructor(t){super(t,"Growth"),this.et()}k(t){if(Date.now()>=this.It){for(var s of this.St)s.update();for(var s of this.Lt)s.update();this.It=Date.now()+1e3}this.v.A(x.Ct,x.fontSize,.5,.25),this.v.A(this.Tt(),x.fontSize,.5,.75),null!==this.At&&this.v.Dt(.5,.5,x.gt)}ended(){return this.Tt()===x.Ct}g(t){null===this.At?this.At=t:(this.At===h.h&&t===h.h?this.et():this.At===h.h&&t===h.i?this.Et(this.St):this.At===h.h&&t===h.o?this.Et(this.Lt):this.At===h.i&&t===h.h?this._t(this.St):this.At===h.o&&t===h.h?this._t(this.Lt):this.At===h.i&&t===h.t?this.Rt(this.St):this.At===h.o&&t===h.t?this.Rt(this.Lt):this.At===h.i&&t===h.i?this.attack(this.St,this.Lt):this.At===h.o&&t===h.o?this.attack(this.Lt,this.St):this.At===h.t&&t===h.i?this.qt(this.St):this.At===h.t&&t===h.o&&this.qt(this.Lt),this.At=null)}attack(t,s){var h=0;for(var i of t)i instanceof y&&(h+=i.zt,i.zt=0);for(var i of s)i instanceof y&&(h+=i.zt,i.zt=0);if(h>0)for(var e=0;e<5;e++){if((i=t[e])instanceof I){i.T=Math.max(0,i.T-h),0===i.T&&(t[e]=new D(this));break}}}Rt(t){if(this.ut>=30)for(var s=0;s<5;s++)if(t[s]instanceof D){this.ut-=30,t[s]=new y(this);break}}_t(t){if(this.ut>=15)for(var s=0;s<5;s++)if(t[s]instanceof D){this.ut-=15,t[s]=new g(this);break}}Tt(){var t="";for(var s of this.St.slice().reverse())t+=s.text();for(var s of(t+="K"+this.ut.toString().padStart(4,"0")+"K",this.Lt))t+=s.text();return t}Et(t){for(var s=0;s<5;s++)if(t[s]instanceof g||t[s]instanceof y){t[s]=new D(this);break}}et(){this.St=[new D(this),new S(this,this.v.G(4,6)),new S(this,this.v.G(7,9)),new L(this,this.v.G(4,6)),new L(this,this.v.G(7,9))],this.Lt=[new D(this),new S(this,this.v.G(4,6)),new S(this,this.v.G(7,9)),new L(this,this.v.G(4,6)),new L(this,this.v.G(7,9))],this.At=null,this.ut=50,this.It=Date.now()+1e3}qt(t){if(this.ut>=20)for(var s=0;s<5;s++){var h=t[s];if(h instanceof g&&!1===h.Ht){this.ut-=20,h.Ht=!0;break}}}}x.Kt=9999,x.gt=.01,x.fontSize=.065,x.Ct="               K1000K               ";class A{constructor(t){this.Ft=t}}class y extends A{constructor(){super(...arguments),this.zt=0}text(){return 1===this.zt?"_x_":2===this.zt?"xx_":3===this.zt?"xxx":"___"}update(){this.zt=Math.min(3,this.zt+1)}}class D extends A{text(){return"   "}update(){}}class g extends A{constructor(){super(...arguments),this.Ht=!1}text(){return this.Ht?":::":"..."}update(){this.Ht?this.Ft.ut=Math.min(x.Kt,this.Ft.ut+2):this.Ft.ut=Math.min(x.Kt,this.Ft.ut+1)}}class I extends A{constructor(t,s){super(t),this.T=s,this.jt=s}}class S extends I{text(){return"·"+this.T.toString()+"·"}update(){}}class L extends I{text(){return"+"+this.T.toString()+"+"}update(){this.T=Math.min(this.jt,this.T+1)}}class C extends r{constructor(t){super(t,"A Path Ahead"),this.currentNode=new _(this.v)}k(t){this.v.A(this.currentNode.U.toString().padStart(3," ")+"%",R.D,.5,.5)}ended(){return 100===this.currentNode.U}g(t){if(t===h.h)null!==this.currentNode.parent&&(this.currentNode=this.currentNode.parent);else{var s=void 0;t===h.i?s=this.currentNode.children.get(h.i):t===h.t?s=this.currentNode.children.get(h.t):t===h.o&&(s=this.currentNode.children.get(h.o)),void 0!==s&&(this.currentNode=s)}}}class T{constructor(t,s,h,i){this.v=t,this.parent=s,this.U=h,this.Gt=i,this.children=new Map,null===this.parent?(this.Ot=0,this.Pt=0):(this.Ot=this.parent.Ot+1,this.Pt=i?this.parent.Pt:this.parent.Pt+1)}}T.Ut=new Map([[0,.9],[1,.7],[2,.3]]);class E extends T{constructor(t,s,i,e){if(super(t,s,i,e),100!=this.U){var r=this.v.ft([h.i,h.t,h.o]);for(var a of[h.i,h.t,h.o]){var n=T.Ut.get(this.Pt);if(void 0!==n&&Math.random()<n||e&&a===r){var o=e&&a===r;Math.random()<.1&&this.U>0?this.children.set(a,new E(this.v,this,Math.max(0,this.U-this.v.G(2,4)),o)):o?this.children.set(a,new E(this.v,this,Math.min(100,this.U+this.v.ft([3,4,5,6,7,8,9,10])),o)):this.children.set(a,new E(this.v,this,Math.min(100,this.U+this.v.ft([4,6,8,10])),o))}}}}}class _ extends E{constructor(t){super(t,null,0,!0)}}class R{constructor(t){this.Bt=1,this.Vt=new Map,this.level=null,this.Wt=t,this.canvas=this.Wt.canvas,this.context=this.Wt.context,this.Jt=Date.now(),this.startTime=Date.now()}k(t){for(var s of[h.i,h.t,h.o,h.h]){var i=this.Vt.get(s);if(void 0!==i&&Date.now()<i+R.Nt){var e=(i+R.Nt-Date.now())/R.Nt/7.28;s===h.i?this.H(0,0,.03,1,"rgba(0, 0, 0, "+e.toString()+")"):s===h.t?this.H(0,0,1,.045,"rgba(0, 0, 0, "+e.toString()+")"):s===h.o?this.H(.97,0,.03,1,"rgba(0, 0, 0, "+e.toString()+")"):s===h.h&&this.H(0,.955,1,.045,"rgba(0, 0, 0, "+e.toString()+")")}}null!==this.level&&this.level.ended()&&(this.Bt+=1,this.level=null,this.Jt=Date.now()),11===this.Bt?(this.A("Victory!",R.D,.5,.5),this.A(this.Qt(),.08,.5,.75)):null===this.level?(this.A("Level "+this.Bt.toString(),R.D,.5,.5),Date.now()>this.Jt+R.Xt&&this.Yt()):(this.level.k(t),this.A(this.Zt(),.025,.007,.963,"left","bottom"),this.A("Level "+this.Bt.toString()+"/10: "+this.level.name,.025,.007,.968,"left","top")),this.$t(0,0,1,1,"black",5)}Dt(t,s,h){this.context.fillStyle="black",this.context.beginPath(),this.context.arc(this.canvas.width*t,this.canvas.height*s,h*this.canvas.height,0,2*Math.PI),this.context.fill()}H(t,s,h,i,e){this.context.fillStyle=e,this.context.beginPath(),this.context.rect(this.canvas.width*t,this.canvas.height*s,this.canvas.width*h,this.canvas.height*i),this.context.fill()}$t(t,s,h,i,e,r){this.context.lineWidth=r,this.context.strokeStyle=e,this.context.beginPath(),this.context.rect(this.canvas.width*t,this.canvas.height*s,this.canvas.width*h,this.canvas.height*i),this.context.stroke()}A(t,s,h,i,e="center",r="middle"){this.context.fillStyle="black",this.context.font=(this.canvas.height*s).toString()+"px LektonRegular, monospace",this.context.textAlign=e,this.context.textBaseline=r,this.context.fillText(t,this.canvas.width*h,this.canvas.height*i)}ts(t){if(null!==this.level)switch(t.key){case"ArrowLeft":this.level.g(h.i);break;case"ArrowRight":this.level.g(h.o);break;case"ArrowUp":this.level.g(h.t);break;case"ArrowDown":this.level.g(h.h)}}ss(t){if(null!==this.level){var s=new e(t.offsetX,t.offsetY),i=(new e(this.canvas.width/2,this.canvas.height/2).angle(s).value+Math.PI/4)%(2*Math.PI);i<Math.PI/2?(this.Vt.set(h.o,Date.now()),this.level.g(h.o)):i<Math.PI?(this.Vt.set(h.h,Date.now()),this.level.g(h.h)):i<3*Math.PI/2?(this.Vt.set(h.i,Date.now()),this.level.g(h.i)):(this.Vt.set(h.t,Date.now()),this.level.g(h.t))}}ft(t){return t[Math.floor(Math.random()*t.length)]}G(t,s){return Math.floor(Math.random()*(s-t+1)+t)}Qt(){const t=this.Jt-this.startTime,s=Math.floor(t/36e5),h=Math.floor(t/6e4)-60*s,i=Math.floor(t/1e3)-3600*s-60*h,e=Math.floor(t/10)-36e4*s-6e3*h-100*i;return 0!=s?s.toString()+":"+h.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")+"."+e.toString().padStart(2,"0"):h.toString()+":"+i.toString().padStart(2,"0")+"."+e.toString().padStart(2,"0")}Yt(){1===this.Bt?this.level=new a(this):2===this.Bt?this.level=new n(this):3===this.Bt?this.level=new o(this):4===this.Bt?this.level=new c(this):5===this.Bt?this.level=new w(this):6===this.Bt?this.level=new b(this):7===this.Bt?this.level=new m(this):8===this.Bt?this.level=new k(this):9===this.Bt?this.level=new x(this):10===this.Bt&&(this.level=new C(this))}Zt(){const t=Date.now()-this.startTime,s=Math.floor(t/36e5),h=Math.floor(t/6e4)-60*s,i=Math.floor(t/1e3)-3600*s-60*h;return 0!=s?s.toString()+":"+h.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0"):h.toString()+":"+i.toString().padStart(2,"0")}}R.D=.12,R.Nt=500,R.Xt=1500;class q{constructor(){this.ts=t=>{this.v.ts(t)},this.ss=t=>{this.v.ss(t)},this.hs=t=>{this.es(),this.v.k(t),requestAnimationFrame(this.hs)},this.rs=t=>{this.ns()},this.canvas=document.getElementById("canvas");let t=this.canvas.getContext("2d");if(null===t)throw new Error("HTML canvas is not supported.");this.context=t,this.ns(),window.addEventListener("keydown",this.ts),window.addEventListener("resize",this.rs),this.canvas.addEventListener("mousedown",this.ss),this.v=new R(this),this.hs(0)}es(){this.context.fillStyle="white",this.context.fillRect(0,0,this.canvas.width,this.canvas.height)}ns(){window.innerHeight*q.os>window.innerWidth?(this.canvas.width=window.innerWidth,this.canvas.height=window.innerWidth/q.os):(this.canvas.width=window.innerHeight*q.os,this.canvas.height=window.innerHeight)}}q.os=1.5,new q}();